#!/usr/bin/with-contenv bashio
declare APP_EXIT_CODE=${1}

bashio::log.warning "Romm web server exited with code ${APP_EXIT_CODE}"

# Halt the entire add-on if Romm crashes
if [ "${APP_EXIT_CODE}" -ne 0 ]; then
    bashio::log.error "Romm crashed - stopping add-on"
    exec /run/s6/basedir/bin/halt
fi
